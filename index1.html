<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>My Drive</title>

<style>
body {
    font-family: Arial;
    margin: 0;
    background: #f2f4f8;
}
header {
    background: #0366d6;
    color: white;
    padding: 15px;
    text-align: center;
}
nav {
    text-align: center;
    padding: 15px;
    background: white;
}
nav button {
    margin: 5px;
    padding: 8px 15px;
    border: none;
    background: #0366d6;
    color: white;
    border-radius: 6px;
    cursor: pointer;
}
nav button:hover {
    background: #024c9a;
}
.container {
    max-width: 900px;
    margin: auto;
    padding: 20px;
}
.card {
    background: white;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 10px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
}
img, video {
    width: 100%;
    border-radius: 8px;
    margin-top: 10px;
}
a {
    text-decoration: none;
    color: #0366d6;
}
</style>
</head>

<body>

<header>
    <h2>üìÇ My Drive</h2>
</header>

<nav>
    <button onclick="showSection('home')">üè† Home</button>
    <button onclick="showSection('images')">üñº Images</button>
    <button onclick="showSection('videos')">üé• Videos</button>
    <button onclick="showSection('files')">üìÑ Other Files</button>
</nav>

<div class="container" id="content">
    <h3>Welcome üëã</h3>
    <p>Select a category above.</p>
</div>

<script>
const username = "sadik618900-cloud";
const repo = "drive";
const branch = "main";

const imageExt = ["jpg","jpeg","png","gif","webp"];
const videoExt = ["mp4","webm","ogg"];

let allFiles = [];

fetch(`https://api.github.com/repos/${username}/${repo}/git/trees/${branch}?recursive=1`)
.then(res=>res.json())
.then(data=>{
    allFiles = data.tree.filter(file => file.type === "blob");
});

function showSection(type){
    const container = document.getElementById("content");
    container.innerHTML = "";

    if(type === "home"){
        container.innerHTML = "<h3>Welcome üëã</h3><p>Select a category above.</p>";
        return;
    }

    allFiles.forEach(file=>{
        const ext = file.path.split('.').pop().toLowerCase();
        const raw = `https://raw.githubusercontent.com/${username}/${repo}/${branch}/${file.path}`;

        if(type === "images" && imageExt.includes(ext)){
            const card = document.createElement("div");
            card.className="card";
            card.innerHTML = `
                <h4>${file.path}</h4>
                <img src="${raw}">
                <br><br>
                <a href="${raw}" target="_blank">Download</a>
            `;
            container.appendChild(card);
        }

        else if(type === "videos" && videoExt.includes(ext)){
            const card = document.createElement("div");
            card.className="card";
            card.innerHTML = `
                <h4>${file.path}</h4>
                <video src="${raw}" controls></video>
            `;
            container.appendChild(card);
        }

        else if(type === "files" && !imageExt.includes(ext) && !videoExt.includes(ext)){
            const card = document.createElement("div");
            card.className="card";
            card.innerHTML = `
                <h4>${file.path}</h4>
                <a href="${raw}" target="_blank">Download File</a>
            `;
            container.appendChild(card);
        }
    });
}
</script>

</body>
</html>
