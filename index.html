<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>f cloud</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Segoe UI}

body{
min-height:100vh;
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
color:white;
transition:.4s;
}

body.light{
background:#f2f2f2;
color:#111;
}

/* HEADER */
header{
display:flex;
justify-content:space-between;
align-items:center;
padding:15px 20px;
background:rgba(255,255,255,0.05);
backdrop-filter:blur(10px);
flex-wrap:wrap;
}

.menu{
display:flex;
gap:10px;
flex-wrap:wrap;
}

.menu button{
display:flex;
align-items:center;
gap:6px;
padding:8px 14px;
border:none;
border-radius:8px;
cursor:pointer;
background:rgba(255,255,255,0.1);
color:white;
transition:.3s;
}

body.light .menu button{
background:#ddd;
color:#111;
}

.menu button:hover,
.menu button.active{
background:#00c6ff;
color:#000;
}

svg{
width:16px;
height:16px;
}

/* DASHBOARD */
.section{
padding:50px 20px;
text-align:center;
}

.clock{
font-size:22px;
margin-top:15px;
font-weight:bold;
}

/* IFRAME */
iframe{
width:100%;
height:80vh;
border:none;
display:none;
}

/* PASSWORD MODAL */
#passwordModal{
position:fixed;
inset:0;
background:rgba(0,0,0,0.6);
display:none;
justify-content:center;
align-items:center;
}

#passwordModal.active{
display:flex;
}

.modal-box{
background:rgba(255,255,255,0.15);
backdrop-filter:blur(15px);
padding:30px;
border-radius:15px;
width:320px;
text-align:center;
box-shadow:0 0 20px rgba(0,0,0,0.4);
}

.modal-box h3{
margin-bottom:15px;
}

.input-box{
position:relative;
}

.input-box input{
width:100%;
padding:10px;
border:none;
border-radius:8px;
outline:none;
font-size:16px;
}

.submit-btn{
margin-top:15px;
padding:10px;
width:100%;
border:none;
border-radius:8px;
background:#00c6ff;
cursor:pointer;
font-weight:bold;
}

#errorMsg{
color:#ff4d4d;
margin-top:10px;
display:none;
font-size:14px;
}

/* TOGGLE */
.theme-btn{
padding:6px 10px;
border:none;
border-radius:6px;
cursor:pointer;
background:#00c6ff;
font-weight:bold;
}

</style>
</head>

<body>

<header>
<div class="menu">
<button id="btnDashboard" onclick="showDashboard()" class="active">
<svg viewBox="0 0 24 24" fill="currentColor">
<path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
</svg>Dashboard</button>

<button id="btnMadrasah" onclick="requestAccess('madrasah')">
<svg viewBox="0 0 24 24" fill="currentColor">
<path d="M12 2L1 7l11 5 9-4.09V17h2V7L12 2z"/>
</svg>Madrasah</button>
</div>

<button class="theme-btn" onclick="toggleTheme()">Toggle</button>
</header>

<div id="dashboardSection" class="section">
<h1>Secure Dashboard</h1>
<p>Protected Access System</p>
<div class="clock" id="liveClock"></div>
</div>

<iframe id="driveIframe"></iframe>

<div id="passwordModal">
<div class="modal-box">
<h3>Enter Dynamic Password</h3>
<div class="input-box">
<input type="password" id="passwordInput" placeholder="Enter password">
</div>
<button class="submit-btn" onclick="verifyPassword()">Access Folder</button>
<div id="errorMsg">Wrong Password</div>
</div>
</div>

<script>

/* GOOGLE DRIVE FOLDER */
const folders={
madrasah:'1T_xsdXiREw7Lo15fXEpnIQUuIGUbjFwM'
};

let selectedFolder=null;
let wrongAttempts=0;
let locked=false;
let inactivityTimer=null;

/* LIVE CLOCK */
function updateClock(){
const now=new Date();
let h=now.getHours()%12||12;
let m=now.getMinutes().toString().padStart(2,'0');
let s=now.getSeconds().toString().padStart(2,'0');
document.getElementById("liveClock").innerText=`${h}:${m}:${s}`;
}
setInterval(updateClock,1000);
updateClock();

/* DYNAMIC PASSWORD (12h + minute no zero trim) */
function generatePassword(){
const now=new Date();
let h=now.getHours()%12||12;
let m=now.getMinutes();
return `${h}${m}`;
}

/* INACTIVITY RESET */
function resetTimer(){
clearTimeout(inactivityTimer);
inactivityTimer=setTimeout(()=>{
alert("Session expired");
location.reload();
},300000);
}
document.addEventListener("click",resetTimer);
document.addEventListener("keypress",resetTimer);
resetTimer();

/* MENU */
function resetActive(){
document.querySelectorAll('.menu button')
.forEach(btn=>btn.classList.remove('active'));
}

function showDashboard(){
if(locked)return;
resetActive();
document.getElementById('btnDashboard').classList.add('active');
document.getElementById('dashboardSection').style.display="block";
document.getElementById('driveIframe').style.display="none";
}

function requestAccess(folder){
if(locked)return;
selectedFolder=folder;
document.getElementById('passwordModal').classList.add('active');
document.getElementById('passwordInput').value="";
document.getElementById('errorMsg').style.display="none";
}

function verifyPassword(){
if(locked)return;

const input=document.getElementById('passwordInput').value;
const realPassword=generatePassword();

if(input===realPassword){
wrongAttempts=0;
document.getElementById('passwordModal').classList.remove('active');
openFolder(selectedFolder);
}else{
wrongAttempts++;
document.getElementById('errorMsg').style.display="block";

if(wrongAttempts>=3){
locked=true;
alert("System Locked for 1 Minute");
setTimeout(()=>{
locked=false;
wrongAttempts=0;
},60000);
}
}
}

function openFolder(folder){
resetActive();
document.getElementById('btnMadrasah').classList.add('active');
document.getElementById('dashboardSection').style.display="none";

const iframe=document.getElementById('driveIframe');
iframe.style.display="block";
iframe.src=`https://drive.google.com/embeddedfolderview?id=${folders[folder]}#grid`;
}

/* THEME */
function toggleTheme(){
document.body.classList.toggle("light");
}

</script>

</body>
</html>
